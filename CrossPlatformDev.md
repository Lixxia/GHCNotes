# Consistency in a Fragmented World
## Designing for multiple platforms 

*What platform did each of the companies start with and why?*
>**Facebook:** started 10 years ago with web. Didn't start thinking about mobile until 2010. Mobile web -> web views, but 2011 realized they needed native apps. 2012 did rewrite for iOS and Android apps. In order to scale had to hire specialized people to build apps across all platforms.
Pinterest: Web first, easiest to focus on web platform and mobile was not prevalent at the time. First app they built was for iphone, entailed tacking on an API (really an afterthought). Went until 2012 where they had a company wide event "summer of apps" to redo ios app and launch android app. As mobile became more important they started focusing on it and eventually built out all the other platforms.

>**Square:** Started in late 2009, launched in 2010 initially with an iphone app because they wanted to do mobile payments. Shortly after they developped an android app. Their iphone and android products are completely different from their web products. Web is mostly used for managing accounts and information. Started off with one app, now they have three. Generally try and release iphone and android simultaniously, trying to keep features consistent accross all products.

>**Instragram:** 4 years old this week! Launched web and ios together. Web platform is viewing galleries mostly, stressing that they want it to be a mobile platform only. Later on they moved to android in 2012, and in March 2014 they started with windows phone. Right now they support 3 platforms + web.

>**Quip:** Launched a year ago. From the start they knew they needed to be cross-platform. Launched initially for web and ios with a beta for android. Launched full version of android around December. Was branded completely about being cross-platform. Expensive to develop cross-platform. There was a bare-bones version on web. (Mostly chrome and firefox, get rekt IE). 

*Why should we be cross-platform at all?*
>**Facebook:** Lots of benefits. Consistent user experience across all platforms. Want anyone to be able to access the same set of products. Especially at facebook, it's people's identy so they have to have consistent controls. From the product teams POV you can develop a consistent view for the product. Common design, common vision on what you want your product to be. Also depends on features, for example privacy controls, you need to be able to control your privacy on both web and mobile. Important to always provide those features on all platforms. From a tech POV it allows for better prediction of your code. If you're xplatform from the beginning and you have the same server side confidence it's easier to predict.

>**Quip:** Quip is about using from anywhere. Since it was a core idea they had to do cross-platform, it was also a market opportunity. Asked if there were benefits from knowing that you're xp from the start. Drawbacks: splitting apart your engineers, different code, lots of testing. Silver linings: you can draw on the best of each platform during development.

>**Square:** The most important thing is not just to do xp dev. Question why you're doing it. You have to take into account: what is the product and who are your users? Square doesn't necissarily have cross-platform consistency between mobile and web. Just between ios and android. They have users who don't know how to use technology (mom + dad), they are just trying to get their business and get paid. Want to make it easy for them. It would be a terrible experience if, with 4 different devices, you can't figure out how to do one specific thing. We want our technilogy to dissapear into the background. On the web side of things, don't want to have to think about it. 

*What are the biggest challenges we've all faced using cross platforms?*
>**Pinterest:** when you're building products and services there is a lot of surface area of your project. On the design side there are challenges on making things consistent. Each platform has strong design paradigms. There are things you want to make consistent accross all platforms while trying to match the platform itself. The engineering side just requires more to be built. It's hard for an individual to engineer everything themselves, there are different paradigms of interaction that enable different use cases. Think about it in terms of organizations that are scaling, you have to start speciallizing. Figure out how to organize your teams, at pinterest we have ios team, web team and android team. Experimentation with mixing and matching your teams. Puts a big burden on your engineering team because you have to learn a lot, have to make sure everyone is contributing good code. There's a lot of coordination and prioritization. For some products you don't have a choice and have to build everything at once. There's a lot of engineering and design cost.

>**Instagram:** Really only dealing with ios and android, only care about constincencies between the two. Coordination between the teams, have to make sure launch dates are exactly the same. It's hard to deal with the Play store and apple store. Have to communicate that to the PR team. We're lucky to be part of facebook because we can use their testing framework. You also have to make tradeoffs on which version you're developing for. If you start to cut out features then your users will complain. There is a lot of technical debt, we fall behind in a lot of cases. It's just about communication. Sometimes ios finds the bug first, and there's failure to communicate over to android. It's all about communication when it comes to cross-platform consistency.

*What are the strategies for mitigating these challenges?*
>**Pinterest:** trying to coordinate between desktop and mobile-web. One thing we did when we rebuilt our website, we wanted to make sure the webapp was treated as a client of the API. built a client that would fetch data from the API endpoints, differnet from traditional webdev. Pushing that logic to an API layer helps keep consistency in engineering. We do a lot of stuff in our framework to enable sharing of code, not traditional inheritence (need shared markup, css, javascript). Option of including things to be shared, we can have stripped down versions of the markup so we're not just sharing it all and hiding some. For mobile-webb and mobile apps there are cases where we'll build things in mobile wa=eb and have native app wrappers around them while we're still developing the features. Enables us to get it out there and eventually replace them wiht native implementations.

>**Quip:** To be in a position from the start to know that these will be challenges, we're semi-informed. We knew building for ios web and android would result in 3x the communication problems, 3x technical debt and 3x as many problems effectively. Everything gets magnified. From the start we built tools to make it easier, don't want to do things 3x manually. Quip made a very large initial investment in engineering to be able to share code later on. We wrote some shared code in c++ to be able to put it in android and ios. Want to fix a bug once and ship that code to both platforms. Quip's editor had a lot of initial engineering time to ensure it could be shared between all platforms. Wanted to ship chrome inside of quip "a bit of a workaround", so that we could develop for that specific webview instead of having to deal with all the different web views on android. It's a lot of time and effort, but necessary. If you want to be xp from the start you'll have problems now or later on (and in between). There is no secret to how to do it, just make intelligent and informed decisions. {There is no silver bullet!}

>**Square:** Any time you approach a challenge you build a toolset around it to help avoid dealing with it again. When we started we only had one web repo. As we've grown we now have multiple web platforms. We had varios frameworks and style guides that we had to figure out how to share. Over time we've been collecting those and making sure our code was easilly abstractable. Can just import 'style gems'. We also do that with javascript libraries that we share around the companies based on the specific function. Want to make sure everything is really well tested, we have integration tests and unit testing on each of our web services. Use open source tools to share APi services across platforms. On web there are a handful of challenges we have to face but it gets expodentially more complicated once you start tackling multiple platforms. We have a concept of a release train, and have a pm/conductor who is in charge of mapping out what version, what features and when it will be released. It's up to all the teams to coordinate with the cundoctor. It's just something that has to be done from a communication standpoint. 

*Do you experiment with and launch features on all platforms, or just start with one?*
>**Facebook:** depends on the feature. Ideally we have product teams who have aallocated platform resources. If we're targetting a redisng of the profile we want it to go out at the same time. But a lot of times we run into platform-specific issues. At facebook we push code twice every day on web. It's easier on web but harder on mobile. It's best to keep in mind the benefit of all the different platforms. We use web for experimentation of features and testing. It's easier and faster to interate on it isntead of waiting 2 weeks every single time there's a change. If it's a mobile product we test it on mobile web first. For testing videos with audio, we gauged the user sentiment on the web first and later shipped it for different platforms. It's a combination of seeing what tradeoffs there are and what the feature is you're working on.

>**Instagram:** we put so much effort into putting features on both platforms that the user data is so similar with very slight differences. We usually launch towards iphone first, because it's faster to develop for. Android is always lagging behind. There are a lot of tradeoffs. Working on video stabilization, ios gave us a lot of tools but android was a huge challenge with different apis and all the manufacterrsers have different methods of encoding and decoding videos. We care about reliability and performance. It's about tradeoffs.

>**Quip:** We try and launch on everything, since that's what we're about. If you end up shipping something for ios and web and decide to do android later, you can end up digging yourself into a hole. Think about the most important actions first. It's important to be able to create a document or folder. If you want to be able to move folders around, not everyone will be using that feature, it's not as critical. Quip doesn't try and have a mobile-web editor, it just redirects you to the native app. But, be able to at least read the document on mobile-web and sign in to edit it. Trying to find the consistency between the ideal and reality. The inbetween is figure out what's important and do that.

*What are some engineering overhals you've had to do to deal with the fact that the landscape is constantly changing?*
>**Facebook:** We started with web and moved towards a mobile-first mindset. A lot of our changes have been gradual. We want people who are used to using this to be able to treat it the same way. We tried to use a lot of our internal tools to extend the existing experience. A lot of our rewrites have been gradual. Our first one was cross-control, we had seperate endpoitns for mobile and desktop web. A lot of the data going into the endpoint is the same on mobile and web. We made a new paradigm that has paramaters, this is the data i need, this is the uri of the page, but sepearte rendering endpoints. Has all the meta-data about the page needed to render, and depending on the platform, goes to that specific endpoint. You end up depricating a lot of the legacy end points. We also have to have the product teams keep in mind how that product is behaving. If we have controllers that are still using legacy code we want to move away from that. We decided to have a unified query language for client-server interaction. As long as your query is specified in that structure, the server doesn't care what platform it's coming from. That has helped us imrpove a lot. 

>**Pinterest:** We had one really big rewrite for the website. We started with web and tacke don an api to support iphone. For a long time there was a fracturing of engineering attention. Ex in search, each of them had their on query to search backend. A search on web was different from a search on mobile. It was bad in terms of fracturing development attention. There were blocks on API development endpoints. It was bad in terms of feature develpoment, because mobile devs got blocked by backend server devs. We wrote our own web-framework in house so that the web would be treated as a client of the framework. It forced people to treat the APi with more respect. We had to do more performance testing on the API. With web and how we set up our APi we were able to peek inside the blackbox and do some performance improvements. It ended up taking us 7 months tog et the full rollout, it was an ambitious rewrite project. We did a big design overhall at the same time. We were trying to make the web and mobile designs more consistent.

*Have you had to do design overhalls in service of platform consistency?*
>**Square:** Started off as just taking a payment, very simple.  A lot of features have been aded in the last 5 years. As we grow we keep piling things into our dashboard, we have to keep that consistent with the features that are availible. We have this login dashboard and as it grows with our expanding featureset we have to redesign it. We've done redesigns a couple times, we overhaul completely the login web. It was a complete rewite and redesign of the product. It's relaly difficult to do, especially as you get bigger. It's pretty important to do, and also impresive that we've done it at this size. Make sure to keep the product slim, don't add features that your users won't know how to use. If we get to the point where people don't understand how to use it then we have to take into account how the design looks and make sure we can refactor that accross all platforms.

>**Instagram:** started off as ios. Mimmicking the design onto android was the first thing we did. The big redesign was for performance: pulling out all the gradients so it could be processed faster. We cut start time by almost 30%. Cut out some assets, from 28 to 8 and colorized the assets to help performance on android just by making it flatter. 